### redis 设计与实现
#### 字符串

> `字符串` `AOF 缓冲区` `客户端输入缓冲区`

`SDS` 取代原始的C字符串
```c
struct sdshdr
{
    int len, //字符串长度
    int free, //剩余可用空间大小
    char buf[], // 实际存放的数据
};
```
1. 空间预分配，free总是有空余（`len > 1M ? free = len : free = 1M`）
2. 惰性释放，字符串重新赋值之后，内存留空，不释放

### 链表

> `列表键` `发布 订阅` `漫查询` `监视器` `客户端输出缓冲区`